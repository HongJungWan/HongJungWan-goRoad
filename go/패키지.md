## Tucker의 Go 언어 프로그래밍 - 요약

<br>

### #7 패키지

<br><br>

### 패키지

패키지란 Go 언어에서 코드를 묶는 가장 큰 단위다.

함수로 코드 블록을, 구조체로 데이터를, 패키지로 (함수와 구조체와 그 외 코드)를 묶는다.

<br>

main 패키지는 특별한 패키지로 프로그램 시작점을 포함한 패키지다.

프로그램은 main 패키지(필수 요소) 하나와 여러 외부 패키지(선택 요소)로 구성된다.

<br><br>

### 임포트 하기

```go
import "fmt" // 한 개의 패키지를 가져올 경우

import (
    "fmt"
    "os"
)            // 여러 개의 패키지를 임포트 할 수 있다.
```

<br><br>

### 패키지 멤버에 접근하기

```go
fmt.Println("Hello World")
```

fmt 패키지명을 쓰고 `점.` 을 찍어서 내부의 함수를 호출하면 된다.

<br><br>

### 경로가 있는 패키지 사용하기

```go
import(
    "fmt"
    "math/hong"
)
```

경로가 있는 패키지에 접근할 때는 마지막 폴더명인 hong만 사용한다.

<br><br>

### 사용하지 않는 패키지 포함하기

패키지를 가져오면 반드시 사용해야 한다. 패키지를 임포트하고 나서 사용하지 않으면 에러가 발생한다.

패키지를 직접 사용하지 않지만 임포트 하는 경우에는 밑줄을 패키지명 앞에 붙여주면 된다.

```go
import (
    "database/sql"
    _"github.com/mattn/go-sqlite3"
)
```

<br><br>

### Go 언어 패키지 관리 및 빌드 시스템

`Gin, GORM` 등의 외부 패키지를 Go 프로젝트에 임포트하고 사용하는 과정을 `go.mod`, `go.sum`, `main.go` 관점에서 살펴보자.

<br>

### main.go 파일

main.go는 Go 프로그램의 진입점이다. 

필요한 패키지를 import 문을 사용하여 아래와 같이 임포트 할 수 있다.

```go
import (
    "github.com/gin-gonic/gin"
    "gorm.io/gorm"
)
```

<br>

### go.mod 파일

go.mod 파일은 프로젝트의 루트 디렉토리에 위치하며, `프로젝트의 모듈 이름`, `Go 버전`, 그리고 필요한 `외부 패키지`들을 정의한다.

`go mod init [패키지명]` 명령을 사용하여 `go.mod` 파일을 생성할 수 있다.

<br>

예를 들어, 프로젝트에 Gin, GORM 같은 외부 패키지를 사용하려면, `go get [패키지 경로]` 명령을 사용하여 의존성을 추가한다. 의존성은 자동으로 go.mod 파일에 추가되고, 필요한 패키지의 정확한 버전이 기록된다.

예를 들어, `go get github.com/gin-gonic/gin`과 `go get gorm.io/gorm` 명령을 실행하면, Gin과 GORM 패키지가 `go.mod` 파일에 추가된다.

<br>

### go.sum 파일

`go.sum` 파일은 `go.mod` 파일에 명시된 의존성의 정확한 버전과 해당 버전의 체크섬을 포함한다. 이를 통해 프로젝트의 의존성이 일관되게 유지되고, 패키지가 변경되지 않았음을 보증한다.

`go mod tidy` 명령을 실행하면 필요한 의존성이 `go.sum` 파일에 추가되고, 더 이상 사용되지 않는 패키지는 제거된다.

<br>

### 패키지 설치 및 빌드

`go build` 명령을 실행하면 Go 빌드 시스템이 `go.mod`와 `go.sum` 파일을 참조하여 필요한 패키지를 다운로드하고, 프로젝트를 빌드 한다.

기본 제공되는 패키지는 Go 설치 경로에서 찾고, 외부 저장소(예: GitHub)에서 호스팅 되는 패키지는 인터넷을 통해 다운로드한다.

Go 모듈 시스템은 GOPATH를 사용하지 않고 모듈 단위로 패키지를 관리합니다. 이는 프로젝트 간의 의존성 충돌을 방지하고 패키지 관리를 단순화한다.

<br>

요약하자면, 

1. `main.go`에서 필요한 패키지를 임포트하고,
2. `go.mod`에서 프로젝트의 의존성을 관리하며, 
3. `go.sum`을 통해 의존성의 일관성을 보장한다. 
4. `go build`를 통해 프로젝트를 빌드 하며, 이 과정에서 필요한 외부 패키지는 자동으로 다운로드하고 빌드에 포함시킨다.

<br><br>